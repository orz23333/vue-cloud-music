webpackJsonp([14],{Krso:function(e,t){},NfmQ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("4YfN"),i=s.n(r),a=s("qwAB"),o=s("y/jF"),n=s("ggOy"),l=s("8stH"),c=s("T452"),u=s("HVJf"),h={props:{query:{type:String,default:""}},data:function(){return{type:1e3,page:0,pullup:!0,beforeScroll:!0,hasMore:!0,result:[],lastQuery:""}},activated:function(){this.query&&this.query!==this.lastQuery&&(this.result=[],this.hasMore=!0,this.getSearch(this.query))},methods:i()({selectDisc:function(e){this.changeDisc(e)},getSearch:function(e){this._searchDisc(e)},_searchDisc:function(e){var t=this;this.page=0,this.hasMore=!0,this.lastQuery=e,this.$refs.suggest&&this.$refs.suggest.scrollTo(0,0),Object(l.b)(e,this.type,this.page).then(function(e){if(e.code===c.b){if(void 0===e.result.playlists)return void(t.hasMore=!1);t.result=t._normalizeDisc(e.result.playlists),t.hasMore=t._checkMore(e.result.playlistCount)}})},_searchMoreDisc:function(){var e=this;this.hasMore&&(this.page++,Object(l.b)(this.query,this.type,this.page).then(function(t){if(t.code===c.b){if(void 0===t.result.playlists)return void(e.hasMore=!1);e.result=e.result.concat(e._normalizeDisc(t.result.playlists)),e.hasMore=e._checkMore(t.result.playlistCount)}}))},_checkMore:function(e){return this.result.length<e},filterDesc:function(e){var t="";return e.length&&(t=e.join("/")),t},_normalizeDisc:function(e){var t=this,s=[];return e.forEach(function(e){var r={};r.id=e.id,r.image=e.coverImgUrl,r.name=e.name,r.desc=e.trackCount+"首音乐 by "+e.creator.nickname,r.count=t._filterCount(e.playCount),s.push(r)}),s},_filterCount:function(e){var t=e/1e4;return t>=1?"播放"+t.toFixed(1)+"万次":"播放"+e+"次"}},Object(u.b)(["changeDisc"])),components:{Scroll:a.a,Loading:o.a,ListBar:n.a}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"suggest"},[s("scroll",{ref:"suggest",staticClass:"scroll-wrapper",attrs:{data:e.result,pullup:e.pullup,beforeScroll:e.beforeScroll},on:{scrollToEnd:e._searchMoreDisc}},[s("div",[s("list-bar",{attrs:{list:e.result},on:{selectItem:e.selectDisc}}),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:e.hasMore,expression:"hasMore"}],attrs:{title:""}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasMore&&!e.result.length,expression:"!hasMore && !result.length"}],staticClass:"no-result-wrapper"},[e._v("抱歉，暂无搜索结果")])],1)])],1)},staticRenderFns:[]};var p=s("C7Lr")(h,f,!1,function(e){s("Krso")},"data-v-1c3e7cee",null);t.default=p.exports}});
//# sourceMappingURL=14.86c702260ad0ed503527.js.map