webpackJsonp([13],{dC8W:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("4YfN"),i=s.n(r),a=s("qwAB"),n=s("y/jF"),o=s("8stH"),l=s("T452"),c=s("HVJf"),u={props:{query:{type:String,default:""}},data:function(){return{type:100,page:0,pullup:!0,beforeScroll:!0,hasMore:!0,result:[]}},activated:function(){this.query&&this.query!==this.lastQuery&&(this.result=[],this.hasMore=!0,this.getSearch(this.query))},methods:i()({selectDisc:function(e){this.changeDisc(e)},getSearch:function(e){this._searchSinger(e)},_searchSinger:function(e){var t=this;this.page=0,this.hasMore=!0,this.lastQuery=e,this.$refs.suggest&&this.$refs.suggest.scrollTo(0,0),Object(o.b)(e,this.type,this.page).then(function(e){if(e.code===l.b){if(void 0===e.result.artists)return void(t.hasMore=!1);t.result=t._normalizeSinger(e.result.artists),t.hasMore=t._checkMore(e.result.artistCount)}})},_searchMoreSinger:function(){var e=this;this.hasMore&&(this.page++,Object(o.b)(this.query,this.type,this.page).then(function(t){if(t.code===l.b){if(void 0===t.result.artists)return void(e.hasMore=!1);e.result=e.result.concat(e._normalizeSinger(t.result.artists)),e.hasMore=e._checkMore(t.result.artistCount)}}))},_checkMore:function(e){return this.result.length<e},filterDesc:function(e){var t="";return e.length&&(t=e.join("/")),t},_normalizeSinger:function(e){var t=this,s=[];return e.forEach(function(e){var r={};r.id=e.id,r.image=e.picUrl,r.name=e.name,r.desc=""+t.filterDesc(e.alias),s.push(r)}),s}},Object(c.b)(["changeDisc"])),components:{Scroll:a.a,Loading:n.a}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"suggest"},[s("scroll",{ref:"suggest",staticClass:"scroll-wrapper",attrs:{data:e.result,pullup:e.pullup,beforeScroll:e.beforeScroll},on:{scrollToEnd:e._searchMoreSinger}},[s("div",[e._l(e.result,function(t){return s("div",{key:t.id,staticClass:"item"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.image,expression:"item.image"}],attrs:{alt:""}}),e._v(" "),s("p",{staticClass:"text"},[e._v("\n                    "+e._s(t.name)+"\n                    "),t.desc?s("span",{staticClass:"desc"},[e._v("("+e._s(t.desc)+")")]):e._e()])])}),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:e.hasMore,expression:"hasMore"}],attrs:{title:""}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasMore&&!e.result.length,expression:"!hasMore && !result.length"}],staticClass:"no-result-wrapper"},[e._v("抱歉，暂无搜索结果")])],2)])],1)},staticRenderFns:[]};var g=s("C7Lr")(u,h,!1,function(e){s("mzEg")},"data-v-31ea3710",null);t.default=g.exports},mzEg:function(e,t){}});
//# sourceMappingURL=13.d38512c2310ce26bb1d9.js.map